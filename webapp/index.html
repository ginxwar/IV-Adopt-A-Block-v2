<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>IV a-a-b Volunteer Page</title>
<!-- iPhone, iOS 7, retina -->
 	<link href="http://www.ivparks.org/images/logo_home.png" sizes="120x120" rel="apple-touch-icon">
	<meta name="apple-mobile-web-app-capable" content="yes" />  
	<meta name="apple-mobile-web-app-status-bar-style" content="yes" /> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	
<!-- MapBox-->	
<script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.4/mapbox.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.4/mapbox.css' rel='stylesheet' />
<!-- JQUERY-->
<script src='https://code.jquery.com/jquery-1.11.0.min.js'></script> 
<script src="http://code.jquery.com/mobile/1.4.3/jquery.mobile-1.4.3.min.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.3/jquery.mobile.structure-1.4.3.min.css" />
<link rel="stylesheet" href="./theme.css" />
<link rel="stylesheet" href="./jquery.mobile.icons.min.css"/>
<!-- upload photo-->
<link rel="stylesheet" href="./upload_photos.css"/>

<!-- tool do draw polygons-->
<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.2/leaflet.draw.css' rel='stylesheet' />
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.2/leaflet.draw.js'></script>
<!-- polygon's label -->
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.css' rel='stylesheet' />
<!-- is a point in a shape -->
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-pip/v0.0.2/leaflet-pip.js'></script>

<!-- pacman -->
<script src="./pacman.js"></script>
<link rel="stylesheet" href="./pacman.css" />
<!-- my js functions -->
<script src="./global.js"></script>
<script src="./mapDrawings.js"></script>
<script src="./geolocation.js"></script>
<script src="./objectToJson.js"></script>
<script src="./db_handler.js"></script>
<script src="./init_client_page.js"></script>

<style>
  body { margin:0; padding:0; }
  html, body, {height: 100%;}
  #map { position:absolute; left:0px; top:0px; bottom:0; width: 100%; height:100%;}
  #main-page { width: 100%; height: 100%;padding: 0px; margin-top: 44px; margin-bottom: 44px;}
</style>
</head>





<body>

<!-- header -->
  <div data-role="header" data-position="fixed" data-fullscreen="false"> 
       <h1 id="sitename">IV AaB Volunteer Page</h1>
  </div><!-- /header -->

 
<!-- ## PAGE1 ## -->
<div data-role="page" class="ui-body" data-title="IV AaB Volunteer" id="main-page"  style="backgrond-color:grey;">   
 <div class="ui-content" role="main">

<!-- PHOTO POPUP -->
	<div data-role="popup" id="popupPhoto" data-theme="a" class="ui-corner-all" 
	     style="width:250px; height:100%; padding:10px;" >
        <div id="show-picture" class="photos"> </div>
   </div>
   
   
<!-- SIGN IN -->
	<div data-role="popup" style="box-shadow: 0px 0px 100px #000;"   id="popupSignin" data-theme="a" class="ui-corner-all" 
	     style="width:250px; height:100%;" >
	     <a class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left" onclick="$('#popupSignin').popup('close');">Close</a>
        <div style="padding:20px;"> 
            <label for="text-basic">Name:</label>
            <input type="text" name="text-basic" id="volname" value="">

            <label for="text-basic">Surname:</label>
            <input type="text" name="text-basic" id="volsurname" value="">

			<label for="select-choice-1" class="select">type of volunteer:</label>
			<select name="select-choice-1" id="voltype">
			    <option value="type1">type1</option>
			    <option value="type2">type2</option>
			    <option value="type3">type3</option>
			    <option value="type4">type4</option>
			</select>
		    
		    <input type="button" data-icon="check" value="START" 
		           onclick="db_start_trip($('#volname').val(), $('#volsurname').val(), $('#voltype').val());">
        </div>
   </div>   




   <!-- map -->
       <div id='map'></div>
   </div>

</div><!-- /page1 -->        




<!-- ## PAGE2  bucket number## -->
<div data-role="page" class="ui-body" data-title="IV AaB Volunteer" id="bucket-page"  style="backgrond-color:grey;">     
  <div class="ui-content" role="main" style="padding:40px;">
	 <label for="text-basic">How many buckets:</label>   
	 <input type="text" id="buckets" name="text-basic" id="text-basic" value="">
	 <label for="text-basic">comment:</label>   
	 <input type="text" id="comment" name="text-basic" id="text-basic" value="">	 

	 <a href="#summary-page" class="ui-btn ui-corner-all ui-shadow ui-btn-a" data-transition="slide"
	    onclick=" clearInterval(timer); // stop tracking my position 
	              loadSummary(TRIP_ID, $('#buckets').val(), $('#comment').val());">Ok</a>
 </div>
</div>



<!-- ## PAGE3  summary ## -->
<div data-role="page" class="ui-body" data-title="IV AaB Volunteer" id="summary-page"  style="backgrond-color:grey;">   
 <div class="ui-content" role="main" style="padding:40px;">
     <div id="summary" style="margin-left:auto; margin-right:auto; display:block;">
     </div>
     <a href="#main-page" class="ui-btn ui-corner-all ui-shadow ui-btn-a" 
        onclick="db_complete_trip(TRIP_ID, $('#buckets').val(), $('#comment').val());" data-transition="slide">Save</a>
 </div>
</div>


<!-- ## FOOTER ## -->
<div data-role="footer" data-position="fixed">
		<div data-role="navbar">
            <ul>
                <li>
                   <a id="menu_start"
                      href="#popupSignin" data-icon="navigation" 
                      data-rel="popup" data-position-to="window" 
                      data-transition="pop">start</a>
                </li>
                <li>
                  <a id="menu_camera"
                     href="#popupPhoto" data-icon="camera" 
                     data-rel="popup" data-position-to="window" 
                     data-transition="pop"
                     onclick="$('#take-picture').click();">camera</a>
                </li>
                <li>
                     <a id="menu_stop" 
                        href="#bucket-page" data-icon="check" disabled="" data-transition="slide" 
                        onclick=" $('#menu_resume').addClass('ui-disabled'); 
                                  $('#menu_pause').addClass('ui-disabled');
                                  $('#menu_stop').addClass('ui-disabled'); 
                                  $('#menu_camera').addClass('ui-disabled');"
                        class="ui-btn ui-disabled">stop</a>
                </li>
            </ul>
        </div><!-- /navbar -->
	</div><!-- /footer -->
	
	
	
	!-- hidden div with the real input button for the camera -->
	<div style="visibility:hidden;">
           <input id="take-picture" type="file" accept="image/*" capture="camera" />
    </div>
    
    !-- black panel -->
    <div id ="blackPanel" style="position:fixed; left:0px; top:0px; width:100%; height:2000px; background-color:rgba(3, 3, 3, 0.7);  z-index:-1;">
 </div>




<script>	 
       $( '#main-page' ).on( "pageshow", function() 
         {
	      $( "[data-role='header'], [data-role='footer']" ).toolbar({ theme: "a" });
	       // if already initialized, return
           if (!map) 
            {
             initialize_map();   
             init_page_PacMan(); 
            }
         });	 
               	           
 </script>

</body>
</html>